//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:2.0.50727.3082
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using Gtk;


namespace ThudSharp
{


	[System.ComponentModel.ToolboxItem(true)]
	public partial class MovablePiece : Gtk.Bin
	{
		private MovablePieceType _PieceType = MovablePieceType.None;
		private GameBoard _GameBoard;
		private BoardPiece _CurrentBoardPiece;
		private bool _IsActive = false;
		public MovablePiece (MovablePieceType PT, GameBoard GB, BoardPiece BP)
		{
			this.Build ();
			_PieceType = PT;
			_GameBoard = GB;
			_CurrentBoardPiece = BP;
			this.evtPiece.VisibleWindow = false;
			this.evtPiece.AboveChild = true;
			if(_PieceType== MovablePieceType.Troll)
			{
				imgMovable.Pixbuf = GoonTools.Common.Troll;
			}
			else if(_PieceType== MovablePieceType.Dwarf)
			{
				imgMovable.Pixbuf = GoonTools.Common.Dwarf;
			}
			else if(_PieceType == MovablePieceType.Rock)
			{
				imgMovable.Pixbuf = GoonTools.Common.Rock;
			}
			this.ShowAll();
		}
		
		#region Public Properties
		
		public bool IsActive
		{
			get{return _IsActive;}
			set{_IsActive=value;}
		}
		
		public MovablePieceType PieceType
		{
			get{return _PieceType;}
			set{_PieceType=value;}
		}
		
		public BoardPiece CurrentBoardPiece
		{
			get{return _CurrentBoardPiece;}
			set{_CurrentBoardPiece=value;}
		}
		
		#endregion Public Properties
		
		#region Widget Events
		
		protected virtual void OnEvtPieceButtonPressEvent (object o, Gtk.ButtonPressEventArgs args)
		{
			if(args.Event.Button == 1 && _IsActive == false)
			{
				_IsActive = true;
				_GameBoard.ShowMoveOptions(this);
			}
			else if((args.Event.Button == 1 || args.Event.Button == 3) && (_IsActive == true))
			{
				_IsActive = false;				
				_GameBoard.ClearMoveOptions();
			}
			
			//Console.WriteLine("Button Press " + args.Event.Button.ToString() + " Name " + w.Name);
		}

		protected virtual void OnEvtPieceButtonReleaseEvent (object o, Gtk.ButtonReleaseEventArgs args)
		{
		}

		protected virtual void OnEvtPieceExposeEvent (object o, Gtk.ExposeEventArgs args)
		{
		}


		protected virtual void OnEvtPieceEnterNotifyEvent (object o, Gtk.EnterNotifyEventArgs args)
		{
			Console.WriteLine("Enter Notify " + _PieceType.ToString());
		}
		
		#endregion Widget Events
	}
}
